<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SEEN Search - Панель управления</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>⚙️</text></svg>">
</head>
<body>
    <div class="admin-container">
        <!-- Шапка -->
        <header class="admin-header">
            <div class="header-top">
                <div class="admin-logo">
                    <i class="fas fa-cogs"></i>
                    <div>
                        <h1>SEEN Search</h1>
                        <p>Панель управления</p>
                    </div>
                </div>
                <div class="admin-actions">
                    <a href="index.html" class="header-btn">
                        <i class="fas fa-search"></i> К поисковику
                    </a>
                </div>
            </div>
            
            <div class="header-stats" id="headerStats">
                <!-- Заполняется JavaScript -->
            </div>
        </header>
        
        <!-- Навигация -->
        <nav class="admin-nav">
            <a href="#dashboard" class="nav-item active" data-section="dashboard">
                <i class="fas fa-tachometer-alt"></i> Дашборд
            </a>
            <a href="#add-site" class="nav-item" data-section="add-site">
                <i class="fas fa-plus-circle"></i> Добавить сайт
            </a>
            <a href="#manage-sites" class="nav-item" data-section="manage-sites">
                <i class="fas fa-list"></i> Управление сайтами
            </a>
        </nav>
        
        <!-- Основной контент -->
        <main class="admin-main">
            <!-- Сообщения -->
            <div class="message" id="adminMessage"></div>
            
            <!-- Дашборд -->
            <section id="dashboard" class="admin-section active">
                <div class="section-header">
                    <h2><i class="fas fa-tachometer-alt"></i> Дашборд</h2>
                    <p>Обзор системы и статистика</p>
                </div>
                
                <div class="dashboard-grid">
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3 class="card-title">Быстрые действия</h3>
                            <div class="card-icon">
                                <i class="fas fa-bolt"></i>
                            </div>
                        </div>
                        <div class="quick-actions">
                            <button class="btn btn-primary" onclick="showSection('add-site')">
                                <i class="fas fa-plus"></i> Добавить сайт
                            </button>
                            <button class="btn btn-secondary" onclick="refreshData()">
                                <i class="fas fa-sync-alt"></i> Обновить данные
                            </button>
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3 class="card-title">Категории сайтов</h3>
                            <div class="card-icon">
                                <i class="fas fa-tags"></i>
                            </div>
                        </div>
                        <div class="category-tags" id="categoryTags">
                            <!-- Заполняется JavaScript -->
                        </div>
                    </div>
                    
                    <div class="dashboard-card">
                        <div class="card-header">
                            <h3 class="card-title">Системная информация</h3>
                            <div class="card-icon">
                                <i class="fas fa-info-circle"></i>
                            </div>
                        </div>
                        <div class="system-info">
                            <div class="info-item">
                                <span class="info-label">Версия системы:</span>
                                <span class="info-value">2.0</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Последнее обновление:</span>
                                <span class="info-value" id="lastUpdateTime">Сегодня</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Поддержка:</span>
                                <span class="info-value">sessionStorage</span>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="dashboard-card">
                    <div class="card-header">
                        <h3 class="card-title">Статистика за сегодня</h3>
                        <div class="card-icon">
                            <i class="fas fa-chart-bar"></i>
                        </div>
                    </div>
                    <div class="today-stats" id="todayStats">
                        <!-- Заполняется JavaScript -->
                    </div>
                </div>
            </section>
            
            <!-- Добавить сайт -->
            <section id="add-site" class="admin-section">
                <div class="section-header">
                    <h2><i class="fas fa-plus-circle"></i> Добавить новый сайт</h2>
                    <p>Заполните форму для добавления сайта в поисковую систему</p>
                </div>
                
                <form id="addSiteForm" class="site-form">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="siteTitle" class="form-label required">Название сайта *</label>
                            <input type="text" id="siteTitle" class="form-input" 
                                   placeholder="Введите название сайта" required>
                            <div class="form-hint">Будет отображаться в результатах поиска</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="siteUrl" class="form-label required">URL сайта *</label>
                            <input type="url" id="siteUrl" class="form-input" 
                                   placeholder="https://example.com" required>
                            <div class="form-hint">Должен начинаться с http:// или https://</div>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="siteDescription" class="form-label required">Описание *</label>
                        <textarea id="siteDescription" class="form-textarea" 
                                  placeholder="Подробное описание сайта" required></textarea>
                        <div class="form-hint">Будет использоваться для поиска</div>
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="siteKeywords" class="form-label">Ключевые слова</label>
                            <input type="text" id="siteKeywords" class="form-input" 
                                   placeholder="через запятую">
                            <div class="form-hint">Например: технологии, IT, программирование</div>
                        </div>
                        
                        <div class="form-group">
                            <label for="siteCategory" class="form-label">Категория</label>
                            <select id="siteCategory" class="form-select">
                                <option value="">Выберите категорию</option>
                            </select>
                            <div class="form-hint">Упрощает поиск по категориям</div>
                        </div>
                    </div>
                    
                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-save"></i> Добавить сайт
                        </button>
                        <button type="reset" class="btn btn-secondary" id="resetForm">
                            <i class="fas fa-times"></i> Очистить форму
                        </button>
                    </div>
                </form>
            </section>
            
            <!-- Управление сайтами -->
            <section id="manage-sites" class="admin-section">
                <div class="section-header">
                    <h2><i class="fas fa-list"></i> Управление сайтами</h2>
                    <p>Просмотр, редактирование и удаление сайтов</p>
                </div>
                
                <div class="sites-header">
                    <div class="search-box">
                        <i class="fas fa-search"></i>
                        <input type="text" id="searchSitesInput" 
                               placeholder="Поиск по названию, URL или описанию...">
                    </div>
                    <div class="sites-actions">
                        <button class="btn btn-secondary" onclick="refreshSites()">
                            <i class="fas fa-sync-alt"></i> Обновить
                        </button>
                        <button class="btn btn-primary" onclick="showSection('add-site')">
                            <i class="fas fa-plus"></i> Добавить
                        </button>
                    </div>
                </div>
                
                <div class="sites-list" id="sitesListContainer">
                    <!-- Заполняется JavaScript -->
                </div>
            </section>
        </main>
    </div>
    
    <!-- Модальное окно редактирования сайта -->
    <div id="editSiteModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-edit"></i> Редактировать сайт</h3>
                <button class="close-modal" onclick="hideModal('editSiteModal')">&times;</button>
            </div>
            <div class="modal-body">
                <form id="editSiteForm">
                    <input type="hidden" id="editSiteId">
                    
                    <div class="form-group">
                        <label for="editSiteTitle" class="form-label required">Название сайта</label>
                        <input type="text" id="editSiteTitle" class="form-input" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="editSiteUrl" class="form-label required">URL сайта</label>
                        <input type="url" id="editSiteUrl" class="form-input" required>
                    </div>
                    
                    <div class="form-group">
                        <label for="editSiteDescription" class="form-label required">Описание</label>
                        <textarea id="editSiteDescription" class="form-textarea" required></textarea>
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="editSiteKeywords" class="form-label">Ключевые слова</label>
                            <input type="text" id="editSiteKeywords" class="form-input">
                        </div>
                        
                        <div class="form-group">
                            <label for="editSiteCategory" class="form-label">Категория</label>
                            <select id="editSiteCategory" class="form-select">
                                <option value="">Выберите категорию</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">
                            <input type="checkbox" id="editSiteActive" checked>
                            Активный (отображается в поиске)
                        </label>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('editSiteModal')">Отмена</button>
                <button class="btn btn-primary" onclick="saveEditedSite()">
                    <i class="fas fa-save"></i> Сохранить изменения
                </button>
            </div>
        </div>
    </div>
    
    <!-- Модальное окно подтверждения удаления -->
    <div id="deleteConfirmModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title"><i class="fas fa-exclamation-triangle"></i> Подтверждение удаления</h3>
                <button class="close-modal" onclick="hideModal('deleteConfirmModal')">&times;</button>
            </div>
            <div class="modal-body">
                <p id="deleteConfirmText">Вы уверены, что хотите удалить этот сайт?</p>
                <p class="warning-text">
                    <i class="fas fa-exclamation-circle"></i>
                    Это действие нельзя отменить.
                </p>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="hideModal('deleteConfirmModal')">Отмена</button>
                <button class="btn btn-danger" id="confirmDeleteBtn">
                    <i class="fas fa-trash"></i> Удалить
                </button>
            </div>
        </div>
    </div>

    <!-- Скрипты -->
    <script src="data-manager-fixed.js"></script>
    <script src="admin-fixed.js"></script>
    
    <script>
        // Глобальные функции для модальных окон
        function showModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'flex';
            }
        }
        
        function hideModal(modalId) {
            const modal = document.getElementById(modalId);
            if (modal) {
                modal.style.display = 'none';
            }
        }
        
        // Обработчики модальных окон
        document.addEventListener('DOMContentLoaded', function() {
            // Закрытие при клике вне окна
            document.querySelectorAll('.modal').forEach(modal => {
                modal.addEventListener('click', function(e) {
                    if (e.target === this) {
                        hideModal(this.id);
                    }
                });
            });
            
            // Обновление времени
            const updateTime = document.getElementById('lastUpdateTime');
            if (updateTime) {
                const now = new Date();
                updateTime.textContent = now.toLocaleString('ru-RU', {
                    day: '2-digit',
                    month: '2-digit',
                    year: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
            }
            
            // Кнопка очистки формы
            const resetBtn = document.getElementById('resetForm');
            if (resetBtn) {
                resetBtn.addEventListener('click', function() {
                    document.getElementById('addSiteForm').reset();
                });
            }
        });
    </script>
</body>
</html>
